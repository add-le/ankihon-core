(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{3903:function(e,n,t){Promise.resolve().then(t.bind(t,2719))},4406:function(e,n,t){"use strict";t.d(n,{LJ:function(){return d},Rl:function(){return f},Zi:function(){return k},cD:function(){return m},kT:function(){return u},oi:function(){return l},yS:function(){return h}});var a=t(6125),s=t(4362);let i="Ankihon: Master Japanese, One Flashcard at a Time!",r="Ankihon";async function c(){return await s.m.services.ankiConnect.createDeck(i)}async function l(){let e=await s.m.services.ankiConnect.deckNamesAndIds();return i in e?e[i]:await c()}async function o(){return(await s.m.services.ankiConnect.createModel({modelName:r,inOrderFields:["Translation","Kanji","Kana"],css:'body,html{height:100%}.card{height:95%;display:flex;align-items:center;justify-content:center;font-family:arial;font-size:20px;text-align:center;color:#000;background-color:#fff}.translation_front{font-family:"Arial";font-size:24px;color:#fafafa;font-weight:700}.kana_back,.kanji_back,.translation_back{font-family:"Arial";font-size:16px;color:#d4d4d8;font-weight:700}.kana_back,.kanji_back{font-size:36px;color:#fafafa}.kana_back{font-size:14px;color:#a1a1a1}',isCloze:!1,cardTemplates:[{Name:"Default Template",Front:'<div class="translation_front">{{Translation}}</div>',Back:'<div class="translation_back">{{Translation}}</div><div class="kanji_back">{{Kanji}}</div><div class="kana_back">{{Kana}}</div>'}]})).id}async function d(){let e=await s.m.services.ankiConnect.modelNamesAndIds();return r in e?e[r]:await o()}async function u(e,n,t){var c,l,o;return await s.m.services.ankiConnect.addNote({deckName:i,modelName:r,fields:{Kana:(null==t?void 0:null===(o=t.translation)||void 0===o?void 0:null===(l=o.from)||void 0===l?void 0:null===(c=l.text)||void 0===c?void 0:c.pronunciation)?(0,a.gY)(t.translation.from.text.pronunciation):"",Kanji:e,Translation:n},options:{allowDuplicate:!1,audio:[],duplicateScope:"deck",duplicateScopeOptions:{deckName:i,checkChildren:!1,checkAllModels:!1},picture:[],tags:["Ankihon"],video:[]}})}async function f(e){return await s.m.services.ankiConnect.cardsInfo(e)}async function h(){return await s.m.services.ankiConnect.findNotes('deck:"'.concat(i,'" is:learn'))}async function m(e){return await s.m.services.ankiConnect.notesInfo(e)}async function k(e,n){return await s.m.services.ankiConnect.answerCards([{cardId:e,ease:"again"===n?1:3}])}},2719:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var a=t(7437),s=t(4406),i=t(4362),r=t(4559);function c(e){let{className:n,children:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"".concat(n," border border-zinc-700 rounded-lg h-full bg-zinc-900"),children:t})})}var l=t(9205);let o=(0,l.Z)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),d=(0,l.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var u=t(3145),f=t(7648);let h=e=>{if(!e||0===e.length)return"";let n=e.toLowerCase();return n.substring(0,1).toUpperCase()+n.substring(1,n.length)};var m=t(2265);function k(){let[e,n]=(0,r.o)();async function t(e){let n=new SpeechSynthesisUtterance(e);n.voice=i.m.japVoices[0],window.speechSynthesis.speak(n)}let[l,k]=(0,m.useState)(!1),[v,x]=(0,m.useState)(0),[p,w]=(0,m.useState)(0),[y,g]=(0,m.useState)("0.6s"),j=(0,m.useRef)(null);function N(e){w(e.targetTouches[0].clientX)}function b(e){x(e.targetTouches[0].clientX)}async function C(t,a){["left","right"].includes(t)&&("left"===t&&await (0,s.Zi)(a,"again"),"right"===t&&await (0,s.Zi)(a,"good"),n(e.slice(0,-1)))}function S(){g("0.6s"),l||t(e[e.length-1].kanji),k(!0)}return(0,a.jsxs)("div",{className:"h-dvh w-dvw",children:[(0,a.jsxs)("div",{className:"flex justify-center h-full items-center relative",children:[e.map((n,s)=>(0,a.jsx)("div",{className:"card ".concat(s===e.length-1?"active":""," h-[75%]"),onTouchStart:N,onTouchMove:b,onTouchEnd:()=>(function(e){if(!p||!v||!l)return;let n=p-v;n>100?(C("left",e),g("0s"),k(!1)):n<-100&&(C("right",e),g("0s"),k(!1)),w(0),x(0)})(n.id),ref:s===e.length-1?j:null,children:(0,a.jsx)("div",{className:"h-full w-full perspective-1000",onClick:S,children:(0,a.jsxs)("div",{className:"transform-style-3d h-full w-full relative shadow-md text-center ".concat(l?"transform rotate-y-180":""),style:{transition:"transform ".concat(y," ease")},children:[(0,a.jsx)("div",{className:"h-full w-full absolute backface-hidden",children:(0,a.jsxs)(c,{className:"h-full w-full flex flex-col items-center justify-center",children:[n.image&&(0,a.jsx)(u.default,{width:100,height:100,alt:"icon representing the card",src:n.image}),(0,a.jsx)("p",{className:"font-bold text-4xl text-zinc-50",children:h(n.translation)})]})}),(0,a.jsx)("div",{className:"h-full w-full absolute backface-hidden transform rotate-y-180",children:(0,a.jsxs)(c,{className:"h-full w-full flex flex-col items-center justify-center",children:[n.image&&(0,a.jsx)(u.default,{width:100,height:100,alt:"icon representing the card",src:n.image}),(0,a.jsx)("p",{className:"font-medium p-3 text-zinc-300",children:h(n.translation)}),(0,a.jsxs)("div",{className:"flex items-center relative -left-[22px]",children:[(0,a.jsx)("khk-button",{variant:"quiet",suppressHydrationWarning:!0,full:!0,class:"h-full",onClick:()=>t(n.kanji),children:(0,a.jsx)(o,{size:18})}),(0,a.jsx)("p",{lang:"ja",className:"font-bold text-4xl text-zinc-50",children:n.kanji})]}),(0,a.jsx)("p",{lang:"ja-Kana",className:"font-bold p-1 text-sm text-zinc-400",children:n.kana})]})})]})})},n.translation)),!e.length&&(0,a.jsx)("p",{className:"m-8 font-medium",children:"\uD83C\uDF89 Congratulations! You have finished this deck for now."})]}),(0,a.jsx)("div",{className:"absolute right-0 bottom-0 m-4",children:(0,a.jsx)("div",{className:"h-11 w-11",children:(0,a.jsx)(f.default,{href:"/main/card",children:(0,a.jsx)("khk-button",{variant:"outline",full:!0,shape:"circular",class:"flex h-full w-full",children:(0,a.jsx)(d,{})})})})}),(0,a.jsx)("div",{className:"absolute bottom-0 m-2 left-0 right-0 w-fit ml-auto mr-auto",children:(0,a.jsxs)("p",{className:"text-xs text-zinc-600",children:["Icons designed by"," ",(0,a.jsx)("a",{className:"underline",href:"https://www.freepik.com/",target:"_blank",children:"Freepik"})]})})]})}t(9352)},4362:function(e,n,t){"use strict";t.d(n,{m:function(){return c}});class a{async fetch(e,n){var t;let a=await fetch(e,n);if(!a.ok)throw Error(a.statusText);return(null===(t=a.headers.get("Content-Type"))||void 0===t?void 0:t.includes("json"))?await a.json():await a.text()}constructor(){}}class s extends a{async invoke(e,n,t){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,{result:s,error:i}=await this.fetch("http://localhost:8765",{method:"POST",body:JSON.stringify({action:e,params:n,key:t,version:a})});if(i)throw Error(i);return s}async deckNames(){return this.invoke("deckNames")}async deckNamesAndIds(){return this.invoke("deckNamesAndIds")}async createDeck(e){return this.invoke("createDeck",{deck:e})}async modelNames(){return this.invoke("modelNames")}async modelNamesAndIds(){return this.invoke("modelNamesAndIds")}async createModel(e){return this.invoke("createModel",e)}async addNote(e){return this.invoke("addNote",{note:e})}async cardReviews(e){return this.invoke("cardReviews",e)}async getReviewsOfCards(e){return this.invoke("getReviewsOfCards",{cards:e})}async cardsInfo(e){return this.invoke("cardsInfo",{cards:e})}async findNotes(e){return this.invoke("findNotes",{query:e})}async notesInfo(e){return this.invoke("notesInfo",{notes:e})}async answerCards(e){return this.invoke("answerCards",{answers:e})}constructor(){super()}}var i=t(1732);class r extends a{async translate(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return await (0,i.ZP)(e,{from:n?"en":"ja",to:n?"ja":"en",corsUrl:"http://cors-anywhere.herokuapp.com/"})}constructor(){super()}}let c={japVoices:[],services:{ankiConnect:new s,translate:new r}}},4559:function(e,n,t){"use strict";let a;t.d(n,{y:function(){return o},o:function(){return d}});var s=t(2265);let i=e=>{let n;let t=new Set,a=(e,a)=>{let s="function"==typeof e?e(n):e;if(!Object.is(s,n)){let e=n;n=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},n,s),t.forEach(t=>t(n,e))}},s=()=>n,i={setState:a,getState:s,getInitialState:()=>r,subscribe:e=>(t.add(e),()=>t.delete(e))},r=n=e(a,s,i);return i},r=e=>e?i(e):i,c=e=>e,l=e=>{let n=r(e),t=e=>(function(e,n=c){let t=s.useSyncExternalStore(e.subscribe,()=>n(e.getState()),()=>n(e.getInitialState()));return s.useDebugValue(t),t})(n,e);return Object.assign(t,n),t},o=(a=e=>({cards:[],setCards:n=>e({cards:n})}))?l(a):l,d=()=>[o(e=>e.cards),o(e=>e.setCards)]},9352:function(){}},function(e){e.O(0,[219,883,750,971,117,744],function(){return e(e.s=3903)}),_N_E=e.O()}]);