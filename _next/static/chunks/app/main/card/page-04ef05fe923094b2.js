(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[995],{4749:function(e,n,t){Promise.resolve().then(t.bind(t,112))},4406:function(e,n,t){"use strict";t.d(n,{LJ:function(){return u},Rl:function(){return f},Zi:function(){return m},cD:function(){return k},kT:function(){return d},oi:function(){return c},yS:function(){return v}});var a=t(6125),r=t(4362);let i="Ankihon: Master Japanese, One Flashcard at a Time!",s="Ankihon";async function o(){return await r.m.services.ankiConnect.createDeck(i)}async function c(){let e=await r.m.services.ankiConnect.deckNamesAndIds();return i in e?e[i]:await o()}async function l(){return(await r.m.services.ankiConnect.createModel({modelName:s,inOrderFields:["Translation","Kanji","Kana"],css:'body,html{height:100%}.card{height:95%;display:flex;align-items:center;justify-content:center;font-family:arial;font-size:20px;text-align:center;color:#000;background-color:#fff}.translation_front{font-family:"Arial";font-size:24px;color:#fafafa;font-weight:700}.kana_back,.kanji_back,.translation_back{font-family:"Arial";font-size:16px;color:#d4d4d8;font-weight:700}.kana_back,.kanji_back{font-size:36px;color:#fafafa}.kana_back{font-size:14px;color:#a1a1a1}',isCloze:!1,cardTemplates:[{Name:"Default Template",Front:'<div class="translation_front">{{Translation}}</div>',Back:'<div class="translation_back">{{Translation}}</div><div class="kanji_back">{{Kanji}}</div><div class="kana_back">{{Kana}}</div>'}]})).id}async function u(){let e=await r.m.services.ankiConnect.modelNamesAndIds();return s in e?e[s]:await l()}async function d(e,n,t){var o,c,l;return await r.m.services.ankiConnect.addNote({deckName:i,modelName:s,fields:{Kana:(null==t?void 0:null===(l=t.translation)||void 0===l?void 0:null===(c=l.from)||void 0===c?void 0:null===(o=c.text)||void 0===o?void 0:o.pronunciation)?(0,a.gY)(t.translation.from.text.pronunciation):"",Kanji:e,Translation:n},options:{allowDuplicate:!1,audio:[],duplicateScope:"deck",duplicateScopeOptions:{deckName:i,checkChildren:!1,checkAllModels:!1},picture:[],tags:["Ankihon"],video:[]}})}async function f(e){return await r.m.services.ankiConnect.cardsInfo(e)}async function v(){return await r.m.services.ankiConnect.findNotes('deck:"'.concat(i,'" is:learn'))}async function k(e){return await r.m.services.ankiConnect.notesInfo(e)}async function m(e,n){return await r.m.services.ankiConnect.answerCards([{cardId:e,ease:"again"===n?1:3}])}},112:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return f}});var a=t(7437),r=t(4406);class i extends FormData{json(){let e={};return this.forEach((n,t)=>e[t]=n),e}constructor(e,n){super(e,n)}}var s=t(4362);let o=(0,t(9205).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var c=t(3145),l=t(7648);let u=({delay:e},n)=>{let t;let a=!0,r=(...r)=>{a?(clearTimeout(t),t=setTimeout(()=>{a&&n(...r),t=void 0},e)):n(...r)};return r.isPending=()=>void 0!==t,r.cancel=()=>{a=!1},r.flush=(...e)=>n(...e),r};var d=t(2265);function f(){let e=(0,d.useRef)(),n=(0,d.useRef)(),t=(0,d.useRef)(""),f=(0,d.useRef)(""),v=(0,d.useRef)(),[k,m]=(0,d.useState)(!0);async function h(e){e.preventDefault();let n=e.target,t=new i(n),a=t.get("front"),s=t.get("back"),o=t.get("sample");a&&s&&await (0,r.kT)(a.toString(),s.toString(),{sample:null==o?void 0:o.toString(),translation:v.current})&&n.reset()}async function p(a,r){var i,o,c,l;if(!a.value||a.value.trim()===("front"===r?t.current:f.current)||("front"===r?t.current=a.value.trim():f.current=a.value.trim(),(null===(o=n.current)||void 0===o?void 0:null===(i=o.value)||void 0===i?void 0:i.trim())&&"front"===r||(null===(l=e.current)||void 0===l?void 0:null===(c=l.value)||void 0===c?void 0:c.trim())&&"back"===r))return;let u=await s.m.services.translate.translate(a.value,"back"===r);(null==u?void 0:u.text)&&(v.current=u,n.current&&"front"===r&&(n.current.value=u.text.trim()),e.current&&"back"===r&&(e.current.value=u.text.trim()),g())}let y=u({delay:1e3},async e=>{await p(e,"front")}),w=u({delay:1e3},async e=>{await p(e,"back")});function g(){var t,a,r,i;m(!((null===(a=e.current)||void 0===a?void 0:null===(t=a.value)||void 0===t?void 0:t.trim())&&(null===(i=n.current)||void 0===i?void 0:null===(r=i.value)||void 0===r?void 0:r.trim()))||void 0)}return(0,a.jsxs)("div",{className:"m-4",children:[(0,a.jsx)("div",{className:"h-12 w-12",children:(0,a.jsx)(l.default,{href:"/main/learn",children:(0,a.jsx)("khk-button",{variant:"quiet",shape:"circular",full:!0,class:"flex w-full h-full",children:(0,a.jsx)(o,{})})})}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(c.default,{width:100,height:100,src:"/images/cards/placeholder.png",title:"Designed by Freepik",alt:"placeholder",priority:!0}),(0,a.jsxs)("form",{className:"flex flex-col gap-3 w-full",onSubmit:h,onInput:g,children:[(0,a.jsx)("khk-textfield",{ref:n=>e.current=n,required:!0,name:"front",lang:"ja",placeholder:"Japanese",label:"Japanese",onInput:function(e){y(e.target)}}),(0,a.jsx)("khk-textfield",{required:!0,ref:e=>n.current=e,name:"back",lang:"en",placeholder:"English",label:"English",onInput:function(e){w(e.target)}}),(0,a.jsx)("khk-textfield",{name:"sample",lang:"ja",placeholder:"Example of usage (Japanese)",label:"Example of usage (Japanese)"}),(0,a.jsx)("khk-button",{class:"mt-2",full:!0,type:"submit",disabled:k,children:"SAVE"})]})]})]})}},4362:function(e,n,t){"use strict";t.d(n,{m:function(){return o}});class a{async fetch(e,n){var t;let a=await fetch(e,n);if(!a.ok)throw Error(a.statusText);return(null===(t=a.headers.get("Content-Type"))||void 0===t?void 0:t.includes("json"))?await a.json():await a.text()}constructor(){}}class r extends a{async invoke(e,n,t){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,{result:r,error:i}=await this.fetch("http://localhost:8765",{method:"POST",body:JSON.stringify({action:e,params:n,key:t,version:a})});if(i)throw Error(i);return r}async deckNames(){return this.invoke("deckNames")}async deckNamesAndIds(){return this.invoke("deckNamesAndIds")}async createDeck(e){return this.invoke("createDeck",{deck:e})}async modelNames(){return this.invoke("modelNames")}async modelNamesAndIds(){return this.invoke("modelNamesAndIds")}async createModel(e){return this.invoke("createModel",e)}async addNote(e){return this.invoke("addNote",{note:e})}async cardReviews(e){return this.invoke("cardReviews",e)}async getReviewsOfCards(e){return this.invoke("getReviewsOfCards",{cards:e})}async cardsInfo(e){return this.invoke("cardsInfo",{cards:e})}async findNotes(e){return this.invoke("findNotes",{query:e})}async notesInfo(e){return this.invoke("notesInfo",{notes:e})}async answerCards(e){return this.invoke("answerCards",{answers:e})}constructor(){super()}}var i=t(1732);class s extends a{async translate(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return await (0,i.ZP)(e,{from:n?"en":"ja",to:n?"ja":"en",corsUrl:"http://cors-anywhere.herokuapp.com/"})}constructor(){super()}}let o={japVoices:[],services:{ankiConnect:new r,translate:new s}}}},function(e){e.O(0,[883,750,971,117,744],function(){return e(e.s=4749)}),_N_E=e.O()}]);