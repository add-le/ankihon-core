(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[995],{4749:function(e,n,t){Promise.resolve().then(t.bind(t,112))},4406:function(e,n,t){"use strict";t.d(n,{LJ:function(){return u},Rl:function(){return f},Zi:function(){return m},kT:function(){return d},oi:function(){return c},yS:function(){return v}});var a=t(6125),r=t(4362);let i="Ankihon: Master Japanese, One Flashcard at a Time!",o="Ankihon";async function s(){return r.m.services.ankiConnect.createDeck(i)}async function c(){let e=await r.m.services.ankiConnect.deckNamesAndIds();return i in e?e[i]:s()}async function l(){return(await r.m.services.ankiConnect.createModel({modelName:o,inOrderFields:["Translation","Kanji","Kana"],css:'body,html{height:100%}.card{height:95%;display:flex;align-items:center;justify-content:center;font-family:arial;font-size:20px;text-align:center;color:#000;background-color:#fff}.translation_front{font-family:"Arial";font-size:24px;color:#fafafa;font-weight:700}.kana_back,.kanji_back,.translation_back{font-family:"Arial";font-size:16px;color:#d4d4d8;font-weight:700}.kana_back,.kanji_back{font-size:36px;color:#fafafa}.kana_back{font-size:14px;color:#a1a1a1}',isCloze:!1,cardTemplates:[{Name:"Default Template",Front:'<div class="translation_front">{{Translation}}</div>',Back:'<div class="translation_back">{{Translation}}</div><div class="kanji_back">{{Kanji}}</div><div class="kana_back">{{Kana}}</div>'}]})).id}async function u(){let e=await r.m.services.ankiConnect.modelNamesAndIds();return o in e?e[o]:l()}async function d(e,n,t){var s,c,l;return r.m.services.ankiConnect.addNote({deckName:i,modelName:o,fields:{Kana:(null==t?void 0:null===(l=t.translation)||void 0===l?void 0:null===(c=l.from)||void 0===c?void 0:null===(s=c.text)||void 0===s?void 0:s.pronunciation)?(0,a.gY)(t.translation.from.text.pronunciation):"",Kanji:e,Translation:n},options:{allowDuplicate:!1,audio:[],duplicateScope:"deck",duplicateScopeOptions:{deckName:i,checkChildren:!1,checkAllModels:!1},picture:[],tags:["Ankihon"],video:[]}})}async function f(e){return r.m.services.ankiConnect.cardsInfo(e)}async function v(){return r.m.services.ankiConnect.findCards('deck:"'.concat(i,'" is:learn'))}async function m(e,n){return r.m.services.ankiConnect.answerCards([{cardId:e,ease:"again"===n?1:3}])}},112:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return f}});var a=t(7437),r=t(4406);class i extends FormData{json(){let e={};return this.forEach((n,t)=>e[t]=n),e}constructor(e,n){super(e,n)}}var o=t(4362);let s=(0,t(9205).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var c=t(3145),l=t(7648);let u=({delay:e},n)=>{let t;let a=!0,r=(...r)=>{a?(clearTimeout(t),t=setTimeout(()=>{a&&n(...r),t=void 0},e)):n(...r)};return r.isPending=()=>void 0!==t,r.cancel=()=>{a=!1},r.flush=(...e)=>n(...e),r};var d=t(2265);function f(){let e=(0,d.useRef)(),n=(0,d.useRef)(),t=(0,d.useRef)(""),f=(0,d.useRef)(""),v=(0,d.useRef)(),[m,k]=(0,d.useState)(!0);async function h(e){e.preventDefault();let n=e.target,t=new i(n),a=t.get("front"),o=t.get("back"),s=t.get("sample");a&&o&&await (0,r.kT)(a.toString(),o.toString(),{sample:null==s?void 0:s.toString(),translation:v.current})&&n.reset()}async function p(a,r){var i,s,c,l;if(!a.value||a.value.trim()===("front"===r?t.current:f.current)||("front"===r?t.current=a.value.trim():f.current=a.value.trim(),(null===(s=n.current)||void 0===s?void 0:null===(i=s.value)||void 0===i?void 0:i.trim())&&"front"===r||(null===(l=e.current)||void 0===l?void 0:null===(c=l.value)||void 0===c?void 0:c.trim())&&"back"===r))return;let u=await o.m.services.translate.translate(a.value,"back"===r);(null==u?void 0:u.text)&&(v.current=u,n.current&&"front"===r&&(n.current.value=u.text.trim()),e.current&&"back"===r&&(e.current.value=u.text.trim()),w())}let g=u({delay:1e3},async e=>{await p(e,"front")}),y=u({delay:1e3},async e=>{await p(e,"back")});function w(){var t,a,r,i;k(!((null===(a=e.current)||void 0===a?void 0:null===(t=a.value)||void 0===t?void 0:t.trim())&&(null===(i=n.current)||void 0===i?void 0:null===(r=i.value)||void 0===r?void 0:r.trim()))||void 0)}return(0,a.jsxs)("div",{className:"m-4",children:[(0,a.jsx)("div",{className:"h-12 w-12",children:(0,a.jsx)(l.default,{href:"/main/learn",children:(0,a.jsx)("khk-button",{variant:"quiet",shape:"circular",full:!0,class:"flex w-full h-full",children:(0,a.jsx)(s,{})})})}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(c.default,{width:100,height:100,src:"/images/cards/placeholder.png",title:"Designed by Freepik",alt:"placeholder",priority:!0}),(0,a.jsxs)("form",{className:"flex flex-col gap-3 w-full",onSubmit:h,onInput:w,children:[(0,a.jsx)("khk-textfield",{ref:n=>e.current=n,required:!0,name:"front",lang:"ja",placeholder:"Japanese",label:"Japanese",onInput:function(e){g(e.target)}}),(0,a.jsx)("khk-textfield",{required:!0,ref:e=>n.current=e,name:"back",lang:"en",placeholder:"English",label:"English",onInput:function(e){y(e.target)}}),(0,a.jsx)("khk-textfield",{name:"sample",lang:"ja",placeholder:"Example of usage (Japanese)",label:"Example of usage (Japanese)"}),(0,a.jsx)("khk-button",{class:"mt-2",full:!0,type:"submit",disabled:m,children:"SAVE"})]})]})]})}},4362:function(e,n,t){"use strict";t.d(n,{m:function(){return s}});class a{async fetch(e,n){var t;let a=await fetch(e,n);if(!a.ok)throw Error(a.statusText);return(null===(t=a.headers.get("Content-Type"))||void 0===t?void 0:t.includes("json"))?await a.json():await a.text()}constructor(){}}class r extends a{async invoke(e,n,t){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,{result:r,error:i}=await this.fetch("http://localhost:8765",{method:"POST",body:JSON.stringify({action:e,params:n,key:t,version:a})});if(i)throw Error(i);return r}async deckNames(){return this.invoke("deckNames")}async deckNamesAndIds(){return this.invoke("deckNamesAndIds")}async createDeck(e){return this.invoke("createDeck",{deck:e})}async modelNames(){return this.invoke("modelNames")}async modelNamesAndIds(){return this.invoke("modelNamesAndIds")}async createModel(e){return this.invoke("createModel",e)}async addNote(e){return this.invoke("addNote",{note:e})}async cardReviews(e){return this.invoke("cardReviews",e)}async getReviewsOfCards(e){return this.invoke("getReviewsOfCards",{cards:e})}async cardsInfo(e){return this.invoke("cardsInfo",{cards:e})}async findNotes(e){return this.invoke("findNotes",{query:e})}async notesInfo(e){return this.invoke("notesInfo",{notes:e})}async answerCards(e){return this.invoke("answerCards",{answers:e})}async findCards(e){return this.invoke("findCards",{query:e})}constructor(){super()}}var i=t(1732);class o extends a{async translate(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return await (0,i.ZP)(e,{from:n?"en":"ja",to:n?"ja":"en",corsUrl:"http://cors-anywhere.herokuapp.com/"})}constructor(){super()}}let s={japVoices:[],services:{ankiConnect:new r,translate:new o}}},9205:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var a=t(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter((e,n,t)=>!!e&&t.indexOf(e)===n).join(" ")};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,a.forwardRef)((e,n)=>{let{color:t="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:c,className:l="",children:u,iconNode:d,...f}=e;return(0,a.createElement)("svg",{ref:n,...o,width:r,height:r,stroke:t,strokeWidth:c?24*Number(s)/Number(r):s,className:i("lucide",l),...f},[...d.map(e=>{let[n,t]=e;return(0,a.createElement)(n,t)}),...Array.isArray(u)?u:[u]])}),c=(e,n)=>{let t=(0,a.forwardRef)((t,o)=>{let{className:c,...l}=t;return(0,a.createElement)(s,{ref:o,iconNode:n,className:i("lucide-".concat(r(e)),c),...l})});return t.displayName="".concat(e),t}},3145:function(e,n,t){"use strict";t.d(n,{default:function(){return r.a}});var a=t(8461),r=t.n(a)},7648:function(e,n,t){"use strict";t.d(n,{default:function(){return r.a}});var a=t(2972),r=t.n(a)},8461:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e,n){for(var t in n)Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}(n,{default:function(){return c},getImageProps:function(){return s}});let a=t(7043),r=t(5346),i=t(5878),o=a._(t(5084));function s(e){let{props:n}=(0,r.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/ankihon-core/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,t]of Object.entries(n))void 0===t&&delete n[e];return{props:n}}let c=i.Image}},function(e){e.O(0,[609,883,971,117,744],function(){return e(e.s=4749)}),_N_E=e.O()}]);